# CELL 7: Generate Synthetic Data - Fixed

import numpy as np
import pandas as pd

# Generate same amount as original data first
num_synthetic = len(original_data)
print(f"Generating {num_synthetic:,} synthetic samples...")

# Generate synthetic data
synthetic_processed = vae_model.generate(num_synthetic)

# Denormalize the synthetic data using the same normalization that was applied in Cell 6
# Get the min/max from the training data normalization
train_min = (processed_data - processed_data.min()) / (processed_data.max() - processed_data.min() + 1e-8)
synthetic_processed = synthetic_processed * (processed_data.max() - processed_data.min()) + processed_data.min()

# Convert back to original format
synthetic_data = processor.inverse_transform(synthetic_processed)

# Apply business constraints
synthetic_data['ed_amount'] = np.clip(synthetic_data['ed_amount'], 0.01, 1000000.0)
synthetic_data['fh_file_creation_date'] = synthetic_data['fh_file_creation_date'].astype(int)
synthetic_data['fh_file_creation_time'] = np.clip(synthetic_data['fh_file_creation_time'].astype(int), 0, 2359)

print(f"\nâœ… Synthetic data generated successfully!")
print(f"Original data: {len(original_data):,} rows")
print(f"Synthetic data: {len(synthetic_data):,} rows")

# Preview synthetic data
print("\nSynthetic data preview:")
display(synthetic_data.head())

# Quick comparison
print("\nQuick comparison:")
print(f"Original amount range: ${original_data['ed_amount'].min():.2f} - ${original_data['ed_amount'].max():.2f}")
print(f"Synthetic amount range: ${synthetic_data['ed_amount'].min():.2f} - ${synthetic_data['ed_amount'].max():.2f}")
print(f"Original companies: {original_data['payer_Company_Name'].nunique()}")
print(f"Synthetic companies: {synthetic_data['payer_Company_Name'].nunique()}")

print("\nðŸŽ‰ Ready for validation and evaluation!")


Alternatively, use this simpler approach for lines 34-35

orig_min = original_data['ed_amount'].min()
orig_max = original_data['ed_amount'].max()
synth_min = synthetic_data['ed_amount'].min()
synth_max = synthetic_data['ed_amount'].max()

print(f"Original amount range: ${orig_min:.2f} - ${orig_max:.2f}")
print(f"Synthetic amount range: ${synth_min:.2f} - ${synth_max:.2f}")
